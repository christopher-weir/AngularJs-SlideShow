"use strict";angular.module("iln-slideshow",[]).factory("$IlnSlideshow",["$rootScope",function(e){function i(e){u=e}function n(e){S=e}function t(e,i){return c=e,m=c.length-1,i()}function l(e){return c[e]}function o(){return u}function d(){return S}function r(){u!==m&&(S=u+1,s(S)),u===m&&(S=0,s(S))}function a(){u!==g&&(S=u-1,s(S)),u===g&&(S=m,s(S))}function s(i){e.$broadcast("IlnSlideshowGoToSlide",i)}var c=[],u=0,S=0,m=0,g=0,f={setSlideData:t,getSlideData:l,setCurrentSlide:i,getCurrentSlide:o,setNextSlide:n,getNextSlide:d,callNextSlide:r,callPreviousSlide:a,goToSlide:s};return f}]).controller("IlnSlideshowCtrl",["$scope","$compile","$timeout","$rootScope","$IlnSlideshow",function(e,i,n,t,l){function o(e){angular.element(document.body).append('<div id="iln-img-preload" style="display:none;"></div>');for(var i=e,n=0;n<i.length;n++)angular.element(document.getElementById("iln-img-preload")).append('<img src="'+i[n]+'" width="1" height="1"></img>'),n===i.length-1&&angular.element(document.getElementById("iln-img-preload")).remove()}var d=!1,r=!0;e.animateSlideCss="",e.init=function(){e.SLIDES_JSON().images&&o(e.SLIDES_JSON().images),l.setSlideData(e.SLIDES_JSON().slides,function(){l.goToSlide(0)})},e.nextSlide=function(){d||(d=!0,l.callNextSlide())},e.previousSlide=function(){d||(d=!0,l.callPreviousSlide())},e.animateOutCurrentSlide=function(){e.animateSlideCss="iln-slide-animate-out",n(function(){e.animateSlideCss="",e.removeSlide()},1e3)},e.removeSlide=function(){angular.element(document.getElementById("iln-slide-wrap-"+String(l.getCurrentSlide()))).remove(),n(function(){e.animateInNextSlide(l.getNextSlide())},10)},e.animateInNextSlide=function(t){l.setCurrentSlide(t),angular.element(document.getElementById("iln-slide-container")).append(i('<iln-slideshow-slide id="iln-slide-wrap-'+String(l.getCurrentSlide())+'" template-url="'+l.getSlideData(l.getCurrentSlide()).template+'"></iln-slideshow-slide>')(e)),n(function(){d=!1,e.animateSlideCss="iln-slide-animate-in"},10)},e.$on("IlnSlideshowGoToSlide",function(i,n){r?(r=!1,e.animateInNextSlide(n)):e.animateOutCurrentSlide()}),e.init()}]).controller("IlnSlideshowPaginationCtrl",["$scope","$rootScope",function(e,i){e.slide_data={},e.current_slide=0,e.init=function(){},e.goToSlide=function(n){e.current_slide!==n&&i.$broadcast("jumpToSlide",n)},e.isActive=function(i){return i<=e.current_slide?"active":""},e.$on("slideTransitionComplete",function(i,n){e.current_slide=n}),e.init()}]).controller("IlnSlideshowSlideCtrl",["$scope",function(e){e.$on("$destroy",function(){console.log("removed")})}]).directive("ilnSlideshow",function(){return{restrict:"E",controller:"IlnSlideshowCtrl",template:'<section id="iln-slideshow"><div id="iln-slide-container" ng-class="animateSlideCss"></div><button id="iln-slide-next" class="nav-arrow" ng-click="nextSlide()"></button><button id="iln-slide-previous" class="nav-arrow" ng-click="previousSlide()"></button><nav class="pagination"><iln-slideshow-pagination></iln-slideshow-pagination></nav></section>',scope:{SLIDES_JSON:"&slideJson"}}}).directive("ilnSlideshowPagination",function(){return{restrict:"E",controller:"IlnSlideshowPaginationCtrl",template:"<div></div>"}}).directive("ilnSlideshowSlide",function(){return{restrict:"E",controller:"IlnSlideshowSlideCtrl",templateUrl:function(e,i){return i.templateUrl||"slides/slide.html"}}});